<?xml version="1.0" encoding="UTF-8"?><sv:node xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:esv="http://www.onehippo.org/jcr/xmlimport" sv:name="hippo:queue" esv:merge="combine">
  <sv:node sv:name="AddRightContainer">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>hipposys:updaterinfo</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:batchsize" sv:type="Long">
      <sv:value>10</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:description" sv:type="String">
      <sv:value>This script will add the top right container above the standardized container on the studies pages</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:dryrun" sv:type="Boolean">
      <sv:value>false</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:parameters" sv:type="String">
      <sv:value/>
    </sv:property>
    <sv:property sv:name="hipposys:query" sv:type="String">
      <sv:value>/jcr:root/hst:hst//element(*,hst:component)</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:script" sv:type="String">
      <sv:value>package org.hippoecm.frontend.plugins.cms.admin.updater&#13;
&#13;
import org.onehippo.repository.update.BaseNodeUpdateVisitor&#13;
import javax.jcr.Node&#13;
&#13;
class UpdaterTemplate extends BaseNodeUpdateVisitor {&#13;
&#13;
&#13;
    public static final String HST_TEMPLATE = "hst:template"&#13;
    public static final String STUDIESPAGEMAIN = "studiespage-main"&#13;
    public static final String TOPRIGHT = "top-right"&#13;
    public static final String CONTAINERCOMPONENT = "hst:containercomponent"&#13;
    public static final String CUSTOM_NO_MARKUP = "custom-no-markup"&#13;
    public static final String XTYPE = "hst:xtype"&#13;
    public static final String VBOX = "hst.vbox"&#13;
&#13;
    boolean doUpdate(Node node) {&#13;
&#13;
        if(!node.hasProperty(HST_TEMPLATE)) {&#13;
            return false&#13;
        }&#13;
&#13;
        if(!STUDIESPAGEMAIN.equals(node.getProperty(HST_TEMPLATE).getString())){&#13;
            return false&#13;
        }&#13;
&#13;
        if(node.hasNode(TOPRIGHT)){&#13;
            return false&#13;
        }&#13;
&#13;
        Node newNode = node.addNode(TOPRIGHT, CONTAINERCOMPONENT)&#13;
        newNode.setProperty(HST_TEMPLATE, CUSTOM_NO_MARKUP)&#13;
        newNode.setProperty(XTYPE, VBOX)&#13;
        newNode.setProperty("hst:label", "Top Right")&#13;
        return true&#13;
    }&#13;
&#13;
    boolean undoUpdate(Node node) {&#13;
        throw new UnsupportedOperationException('Updater does not implement undoUpdate method')&#13;
    }&#13;
}</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:throttle" sv:type="Long">
      <sv:value>1000</sv:value>
    </sv:property>
  </sv:node>
  <sv:node sv:name="Add news containers">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>hipposys:updaterinfo</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:batchsize" sv:type="Long">
      <sv:value>10</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:description" sv:type="String">
      <sv:value>This script will add containers for the news list and news detail page</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:dryrun" sv:type="Boolean">
      <sv:value>false</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:parameters" sv:type="String">
      <sv:value/>
    </sv:property>
    <sv:property sv:name="hipposys:query" sv:type="String">
      <sv:value>//element(*,hst:workspace)</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:script" sv:type="String">
      <sv:value>package org.hippoecm.frontend.plugins.cms.admin.updater&#13;
        &#13;
        import org.onehippo.repository.update.BaseNodeUpdateVisitor&#13;
        import javax.jcr.Node&#13;
        &#13;
        class UpdaterTemplate extends BaseNodeUpdateVisitor {&#13;
        &#13;
        boolean doUpdate(Node node) {&#13;
        &#13;
        if(!node.hasNode("hst:containers")){&#13;
        return false&#13;
        }&#13;
        log.debug "Updating node ${node.path}"&#13;
        Node containers = node.getNode("hst:containers")&#13;
        &#13;
        Node newslistFolder = containers.addNode("newslist", "hst:containercomponentfolder")&#13;
        Node main = newslistFolder.addNode("main", "hst:containercomponent")&#13;
        main.setProperty("hst:label", "News List Main")&#13;
        main.setProperty("hst:template", "custom-no-markup")&#13;
        main.setProperty("hst:xtype", "hst.vbox")&#13;
        Node newslist = main.addNode("newslist","hst:containeritemcomponent")&#13;
        newslist.setProperty("hst:componentclassname", "org.onehippo.cms7.essentials.components.EssentialsNewsComponent")&#13;
        newslist.setProperty("hst:template", "newslist-main-newslist")&#13;
        newslist.setProperty("hst:xtype", "hst.vbox")&#13;
        &#13;
        String[] parameterNames = ["path", "hideFutureItems", "documentDateField", "documentTypes", "sortOrder", "sortField", "pageSize", "showPagination", "includeSubtypes", "org.hippoecm.hst.core.component.template"]&#13;
        String[] parameterValues = ["", "on", "", "aaadegrees:newsdocument", "desc", "", "10", "on", "on","webfile:/freemarker/hstdefault/newslist-main-newslist.ftl"]&#13;
        newslist.setProperty("hst:parameternames", parameterNames)&#13;
        newslist.setProperty("hst:parametervalues", parameterValues)&#13;
        &#13;
        Node newspageFolder = containers.addNode("newspage", "hst:containercomponentfolder")&#13;
        Node newspagemain = newspageFolder.addNode("main", "hst:containercomponent")&#13;
        newspagemain.setProperty("hst:label", "News Page Main")&#13;
        newspagemain.setProperty("hst:template", "custom-no-markup")&#13;
        newspagemain.setProperty("hst:xtype", "hst.vbox")&#13;
        Node newspage = newspagemain.addNode("newspage","hst:containeritemcomponent")&#13;
        newspage.setProperty("hst:componentclassname", "org.onehippo.cms7.essentials.components.EssentialsContentComponent")&#13;
        newspage.setProperty("hst:template", "newspage-main")&#13;
        newspage.setProperty("hst:xtype", "hst.vbox")&#13;
        &#13;
        return true&#13;
        }&#13;
        &#13;
        boolean undoUpdate(Node node) {&#13;
        throw new UnsupportedOperationException('Updater does not implement undoUpdate method')&#13;
        }&#13;
        &#13;
        }</sv:value>
    </sv:property>
    <sv:property sv:name="hipposys:throttle" sv:type="Long">
      <sv:value>1000</sv:value>
    </sv:property>
  </sv:node>
</sv:node>
